as.Date(casos$FECHA_INI_AJUSTADA,format="%d/%m/%Y")
casos$FECHA_INI_AJUSTADA=as.Date(casos$FECHA_INI_AJUSTADA,format="%d/%m/%Y")
as.Date(goo$DATE)
goo$DATE=as.Date(goo$DATE)
casos[!complete.cases(casos$FECHA_INI_AJUSTADA),]
casos=casos[complete.cases(casos$FECHA_INI_AJUSTADA),]
as.Date(bed$fecha)
bed$fecha=as.Date(bed$fecha)
library(lubridate)
casos$year=year(casos$FECHA_INI_AJUSTADA)
casos$week=epiweek(casos$FECHA_INI_AJUSTADA)
casos$year=year(casos$FECHA_INI_AJUSTADA)
casos$week=epiweek(casos$FECHA_INI_AJUSTADA)
casos$week=ifelse(casos$week<10,paste0(0,casos$week),casos$week)
casos$semana=paste0(casos$year,casos$week)
casos$semana
casos$semana=as.numeric(casos$semana)
casos$semana=ifelse(casos$semana==202153,
202053,
casos$semana)
barplot(table(casos$EDAD))
casos$EDAD_grupo=cut(casos$EDAD,
breaks=c(0,17,50,65,80,200),
labels = c("<18","18-50","50-65","65-80",">80"),ordered_result = T,include.lowest = T)
barplot(table(falles$EDAD))
falles$EDAD_grupo=cut(falles$EDAD_A,
breaks=c(0,17,50,65,80,200),
labels = c("<18","18--50","50-65","65-80",">80"),ordered_result = T,include.lowest = T)
bed$fecha=as.Date(bed$fecha)
falles$FECHA_DEF=as.Date(falles$FECHA_DEF)
falles=falles[complete.cases(falles$FECHA_DEF),]
casos$FECHA_INI_AJUSTADA=as.Date(casos$FECHA_INI_AJUSTADA,format="%d/%m/%Y")
casos=casos[complete.cases(casos$FECHA_INI_AJUSTADA),]
goo$DATE=as.Date(goo$DATE)
library(lubridate)
casos$year=year(casos$FECHA_INI_AJUSTADA)
casos$week=epiweek(casos$FECHA_INI_AJUSTADA)
casos$week=ifelse(casos$week<10,paste0(0,casos$week),casos$week)
casos$semana=paste0(casos$year,casos$week)
casos$semana=as.numeric(casos$semana)
casos$semana=ifelse(casos$semana==202153,
202053,
casos$semana)
casos$EDAD_grupo=cut(casos$EDAD,
breaks=c(0,17,50,65,80,200),
labels = c("<18","18-50","50-65","65-80",">80"),ordered_result = T,include.lowest = T)
falles$year=year(falles$FECHA_DEF)
falles$week=epiweek(falles$FECHA_DEF)
falles$week=ifelse(falles$week<10,paste0(0,falles$week),falles$week)
falles$semana=paste0(falles$year,falles$week)
falles$semana=as.numeric(falles$semana)
falles$semana=ifelse(falles$semana==202153,
202053,
falles$semana)
falles$EDAD_grupo=cut(falles$EDAD_A,
breaks=c(0,17,50,65,80,200),
labels = c("<18","18--50","50-65","65-80",">80"),ordered_result = T,include.lowest = T)
goo$year=year(goo$DATE)
goo$week=epiweek(goo$DATE)
goo$week=ifelse(goo$week<10,paste0(0,goo$week),goo$week)
goo$semana=paste0(goo$year,goo$week)
goo$semana=as.numeric(goo$semana)
goo$semana=ifelse(goo$semana==202153,
202053,
goo$semana)
#table(goo$DEPARTAMENTO)
bed$year=year(bed$fecha)
bed$week=epiweek(bed$fecha)
bed$week=ifelse(bed$week<10,paste0(0,bed$week),bed$week)
bed$semana=paste0(bed$year,bed$week)
bed$semana=as.numeric(bed$semana)
bed$semana=ifelse(bed$semana==202153,
202053,
bed$semana)
#table(bed$DEPARTAMENTO)
as.ordered(bed$semana)
bed$semana=as.ordered(bed$semana)
goo$semana=as.ordered(goo$semana)
falles$semana=as.ordered(falles$semana)
casos$semana=as.ordered(casos$semana)
saveRDS(bed,file="ucicams.rds")
saveRDS(casos,file="casos.rds")
saveRDS(falles,file="falles.rds")
saveRDS(goo,file="google.rds")
setwd("~/Documents/GITHUBs/minsa-dashboards/MINSA-dashboard.github.io")
saveRDS(bed,file="ucicams.rds")
saveRDS(casos,file="casos.rds")
saveRDS(falles,file="falles.rds")
saveRDS(goo,file="google.rds")
library(rio)
bed=import("beds.xlsx")
falles=import("sinadef_cdc.xlsx")
casos=import("casos 2.csv")
goo=import("Global_Mobility_Report.csv")
###beds
names(bed)=c("DEPARTAMENTO", "fecha","ucioc","uciop","camoc","camop")
#falles
falles=falles[complete.cases(falles$edad_a),]
falles$UBIGEO_INEI=NULL
falles[falles$Provincia=="CALLAO" & !is.na(falles$Provincia)  ,"Departamento"]="CALLAO"
falles=falles[complete.cases(falles),]
falles$clasdef=factor(falles$clasdef,
levels = c('sospechoso','confirmado','otro'),
labels = c('confirmado','posible','otro'))
falles[falles$PROVINCIA!="LIMA" & !is.na(falles$PROVINCIA) & falles$DEPARTAMENTO=="LIMA" & !is.na(falles$DEPARTAMENTO),"DEPARTAMENTO"]="LIMA REGION"
subnames1=c("Departamento","Provincia","edad_a","FECHA_DEF","SEXO","TIPOLUGAR","clasdef")
falles=falles[,subnames1]
###casos
casos$ubigeo=NULL
casos=casos[complete.cases(casos$EDAD),]
subnames2=c("Departamento_con_lima","PROVINCIA_FINAL","X.U.FEFF.MetodoDX","EDAD","SEXO","FECHA_INI_AJUSTADA")
casos=casos[,subnames2]
names(casos)[c(1,3)]=c("DEPARTAMENTO","MetodoDX")
#google
goo=goo[goo$country_region_code=="PE" & !is.na(goo$country_region_code),]
goo=goo[,c("sub_region_1","sub_region_2","date","residential_percent_change_from_baseline")]
goo=goo[goo$sub_region_2!="",]
goo$PROVINCIA=gsub(" Province","",goo$PROVINCIA)
library(rio)
bed=import("beds.xlsx")
falles=import("sinadef_cdc.xlsx")
casos=import("casos 2.csv")
goo=import("Global_Mobility_Report.csv")
###beds
names(bed)=c("DEPARTAMENTO", "fecha","ucioc","uciop","camoc","camop")
#falles
falles=falles[complete.cases(falles$edad_a),]
falles$UBIGEO_INEI=NULL
falles[falles$Provincia=="CALLAO" & !is.na(falles$Provincia)  ,"Departamento"]="CALLAO"
falles=falles[complete.cases(falles),]
falles$clasdef=factor(falles$clasdef,
levels = c('sospechoso','confirmado','otro'),
labels = c('confirmado','posible','otro'))
falles[falles$PROVINCIA!="LIMA" & !is.na(falles$PROVINCIA) & falles$DEPARTAMENTO=="LIMA" & !is.na(falles$DEPARTAMENTO),"DEPARTAMENTO"]="LIMA REGION"
subnames1=c("Departamento","Provincia","edad_a","FECHA_DEF","SEXO","TIPOLUGAR","clasdef")
falles=falles[,subnames1]
###casos
casos$ubigeo=NULL
casos=casos[complete.cases(casos$EDAD),]
subnames2=c("Departamento_con_lima","PROVINCIA_FINAL","X.U.FEFF.MetodoDX","EDAD","SEXO","FECHA_INI_AJUSTADA")
casos=casos[,subnames2]
names(casos)[c(1,3)]=c("DEPARTAMENTO","MetodoDX")
#google
goo=goo[goo$country_region_code=="PE" & !is.na(goo$country_region_code),]
goo=goo[,c("sub_region_1","sub_region_2","date","residential_percent_change_from_baseline")]
goo=goo[goo$sub_region_2!="",]
names(goo)=c("DEPARTAMENTO","PROVINCIA", "DATE","INAMOVILIDAD")
goo$PROVINCIA=gsub(" Province","",goo$PROVINCIA)
goo$INAMOVILIDAD=ifelse(is.na(goo$INAMOVILIDAD),0,goo$INAMOVILIDAD)
goo$DEPARTAMENTO=toupper(goo$DEPARTAMENTO)
goo$PROVINCIA=toupper(goo$PROVINCIA)
###
row.names(bed)=NULL
row.names(casos)=NULL
row.names(falles)=NULL
row.names(goo)=NULL
names(falles)=toupper(names(falles))
names(casos)=toupper(names(casos))
bed$fecha=as.Date(bed$fecha)
falles$FECHA_DEF=as.Date(falles$FECHA_DEF)
falles=falles[complete.cases(falles$FECHA_DEF),]
casos$FECHA_INI_AJUSTADA=as.Date(casos$FECHA_INI_AJUSTADA,format="%d/%m/%Y")
casos=casos[complete.cases(casos$FECHA_INI_AJUSTADA),]
goo$DATE=as.Date(goo$DATE)
library(lubridate)
casos$year=year(casos$FECHA_INI_AJUSTADA)
casos$week=epiweek(casos$FECHA_INI_AJUSTADA)
casos$week=ifelse(casos$week<10,paste0(0,casos$week),casos$week)
casos$semana=paste0(casos$year,casos$week)
casos$semana=as.numeric(casos$semana)
casos$semana=ifelse(casos$semana==202153,
202053,
casos$semana)
casos$semana=as.ordered(casos$semana)
casos$EDAD_grupo=cut(casos$EDAD,
breaks=c(0,17,50,65,80,200),
labels = c("<18","18-50","50-65","65-80",">80"),ordered_result = T,include.lowest = T)
falles$year=year(falles$FECHA_DEF)
falles$week=epiweek(falles$FECHA_DEF)
falles$week=ifelse(falles$week<10,paste0(0,falles$week),falles$week)
falles$semana=paste0(falles$year,falles$week)
falles$semana=as.numeric(falles$semana)
falles$semana=ifelse(falles$semana==202153,
202053,
falles$semana)
falles$semana=as.ordered(falles$semana)
falles$EDAD_grupo=cut(falles$EDAD_A,
breaks=c(0,17,50,65,80,200),
labels = c("<18","18--50","50-65","65-80",">80"),ordered_result = T,include.lowest = T)
goo$year=year(goo$DATE)
goo$week=epiweek(goo$DATE)
goo$week=ifelse(goo$week<10,paste0(0,goo$week),goo$week)
goo$semana=paste0(goo$year,goo$week)
goo$semana=as.numeric(goo$semana)
goo$semana=ifelse(goo$semana==202153,
202053,
goo$semana)
goo$semana=as.ordered(goo$semana)
bed$year=year(bed$fecha)
bed$week=epiweek(bed$fecha)
bed$week=ifelse(bed$week<10,paste0(0,bed$week),bed$week)
bed$semana=paste0(bed$year,bed$week)
bed$semana=as.numeric(bed$semana)
bed$semana=ifelse(bed$semana==202153,
202053,
bed$semana)
bed$semana=as.ordered(bed$semana)
#table(bed$DEPARTAMENTO)
saveRDS(bed,file="ucicams.rds")
saveRDS(casos,file="casos.rds")
saveRDS(falles,file="falles.rds")
saveRDS(goo,file="google.rds")
falles=readRDS("falles.rds")
falles=readRDS("falles.rds")
table(falles$EDAD_grupo,falles$TIPOLUGAR)
table(falles$TIPOLUGAR)
falles[falles$TIPOLUGAR%in%c("CENTRO LABORAL","EN TRANSITO","IGNORADO","VIA PUBLICA"),"TIPOLUGAR"]="OTRO"
table(falles$TIPOLUGAR)
saveRDS(falles,file="falles.rds")
falles=readRDS("falles.rds")
falles=readRDS("falles.rds")
table(falles$EDAD_grupo,falles$TIPOLUGAR)
library(rio)
bed=import("beds.xlsx")
falles=import("sinadef_cdc.xlsx")
casos=import("casos 2.csv")
goo=import("Global_Mobility_Report.csv")
###beds
names(bed)=c("DEPARTAMENTO", "fecha","ucioc","uciop","camoc","camop")
#falles
falles=falles[complete.cases(falles$edad_a),]
falles$UBIGEO_INEI=NULL
falles[falles$Provincia=="CALLAO" & !is.na(falles$Provincia)  ,"Departamento"]="CALLAO"
falles=falles[complete.cases(falles),]
falles$clasdef=factor(falles$clasdef,
levels = c('sospechoso','confirmado','otro'),
labels = c('confirmado','posible','otro'))
falles[falles$PROVINCIA!="LIMA" & !is.na(falles$PROVINCIA) & falles$DEPARTAMENTO=="LIMA" & !is.na(falles$DEPARTAMENTO),"DEPARTAMENTO"]="LIMA REGION"
subnames1=c("Departamento","Provincia","edad_a","FECHA_DEF","SEXO","TIPOLUGAR","clasdef")
falles=falles[,subnames1]
###casos
casos$ubigeo=NULL
casos=casos[complete.cases(casos$EDAD),]
subnames2=c("Departamento_con_lima","PROVINCIA_FINAL","X.U.FEFF.MetodoDX","EDAD","SEXO","FECHA_INI_AJUSTADA")
casos=casos[,subnames2]
names(casos)[c(1,3)]=c("DEPARTAMENTO","MetodoDX")
#google
goo=goo[goo$country_region_code=="PE" & !is.na(goo$country_region_code),]
goo=goo[,c("sub_region_1","sub_region_2","date","residential_percent_change_from_baseline")]
goo=goo[goo$sub_region_2!="",]
names(goo)=c("DEPARTAMENTO","PROVINCIA", "DATE","INAMOVILIDAD")
goo$PROVINCIA=gsub(" Province","",goo$PROVINCIA)
goo$INAMOVILIDAD=ifelse(is.na(goo$INAMOVILIDAD),0,goo$INAMOVILIDAD)
goo$DEPARTAMENTO=toupper(goo$DEPARTAMENTO)
goo$PROVINCIA=toupper(goo$PROVINCIA)
###
row.names(bed)=NULL
row.names(casos)=NULL
row.names(falles)=NULL
row.names(goo)=NULL
names(falles)=toupper(names(falles))
names(casos)=toupper(names(casos))
bed$fecha=as.Date(bed$fecha)
falles$FECHA_DEF=as.Date(falles$FECHA_DEF)
falles=falles[complete.cases(falles$FECHA_DEF),]
casos$FECHA_INI_AJUSTADA=as.Date(casos$FECHA_INI_AJUSTADA,format="%d/%m/%Y")
casos=casos[complete.cases(casos$FECHA_INI_AJUSTADA),]
goo$DATE=as.Date(goo$DATE)
library(lubridate)
casos$year=year(casos$FECHA_INI_AJUSTADA)
casos$week=epiweek(casos$FECHA_INI_AJUSTADA)
casos$week=ifelse(casos$week<10,paste0(0,casos$week),casos$week)
casos$semana=paste0(casos$year,casos$week)
casos$semana=as.numeric(casos$semana)
casos$semana=ifelse(casos$semana==202153,
202053,
casos$semana)
casos$semana=as.ordered(casos$semana)
casos$EDAD_grupo=cut(casos$EDAD,
breaks=c(0,17,50,65,80,200),
labels = c("<18","18-50","50-65","65-80",">80"),ordered_result = T,include.lowest = T)
falles$year=year(falles$FECHA_DEF)
falles$week=epiweek(falles$FECHA_DEF)
falles$week=ifelse(falles$week<10,paste0(0,falles$week),falles$week)
falles$semana=paste0(falles$year,falles$week)
falles$semana=as.numeric(falles$semana)
falles$semana=ifelse(falles$semana==202153,
202053,
falles$semana)
falles$semana=as.ordered(falles$semana)
falles$EDAD_grupo=cut(falles$EDAD_A,
breaks=c(0,17,50,65,80,200),
labels = c("<18","18-50","50-65","65-80",">80"),ordered_result = T,include.lowest = T)
goo$year=year(goo$DATE)
goo$week=epiweek(goo$DATE)
goo$week=ifelse(goo$week<10,paste0(0,goo$week),goo$week)
goo$semana=paste0(goo$year,goo$week)
goo$semana=as.numeric(goo$semana)
goo$semana=ifelse(goo$semana==202153,
202053,
goo$semana)
goo$semana=as.ordered(goo$semana)
bed$year=year(bed$fecha)
bed$week=epiweek(bed$fecha)
bed$week=ifelse(bed$week<10,paste0(0,bed$week),bed$week)
bed$semana=paste0(bed$year,bed$week)
bed$semana=as.numeric(bed$semana)
bed$semana=ifelse(bed$semana==202153,
202053,
bed$semana)
bed$semana=as.ordered(bed$semana)
#table(bed$DEPARTAMENTO)
falles[falles$TIPOLUGAR%in%c("CENTRO LABORAL","EN TRANSITO","IGNORADO","VIA PUBLICA"),"TIPOLUGAR"]="OTRO"
saveRDS(bed,file="ucicams.rds")
saveRDS(casos,file="casos.rds")
saveRDS(falles,file="falles.rds")
saveRDS(goo,file="google.rds")
falles=readRDS("falles.rds")
table(falles$EDAD_grupo,falles$TIPOLUGAR)
falles$CLASDEF
falles[falles$CLASDEF=="confirmado",]
table(falles$EDAD_grupo,falles$TIPOLUGAR)
falles=falles[falles$CLASDEF=="confirmado",]
table(falles$EDAD_grupo,falles$TIPOLUGAR)
prop.table(table(falles$EDAD_grupo,falles$TIPOLUGAR))
100*prop.table(table(falles$EDAD_grupo,falles$TIPOLUGAR))
round(100*prop.table(table(falles$EDAD_grupo,falles$TIPOLUGAR)))
round(100*prop.table(table(falles$EDAD_grupo,falles$TIPOLUGAR)),1)
round(100*prop.table(table(falles$EDAD_grupo,falles$TIPOLUGAR),margin = 1),1)
round(100*prop.table(table(falles$EDAD_grupo,falles$TIPOLUGAR),margin = 2),1)
falles=readRDS("falles.rds")
fallesc=falles[falles$CLASDEF=="confirmado",]
round(100*prop.table(table(fallesc$EDAD_grupo,fallesc$TIPOLUGAR)),1)
round(100*prop.table(table(fallesc$EDAD_grupo,fallesc$TIPOLUGAR),margin = 1),1)
round(100*prop.table(table(fallesc$EDAD_grupo,fallesc$TIPOLUGAR),margin = 2),1)
falles=readRDS("falles.rds")
falles=falles[falles$CLASDEF=="confirmado",]
round(100*prop.table(table(falles$EDAD_grupo,falles$TIPOLUGAR,falles$CLASDEF)),1)
round(100*prop.table(table(falles$EDAD_grupo,falles$TIPOLUGAR),margin = 1),1)
round(100*prop.table(table(falles$EDAD_grupo,falles$TIPOLUGAR),margin = 2),1)
falles=readRDS("falles.rds")
round(100*prop.table(table(falles$EDAD_grupo,falles$TIPOLUGAR,falles$CLASDEF)),2)
# round(100*prop.table(table(falles$EDAD_grupo,falles$TIPOLUGAR),margin = 1),1)
#
# round(100*prop.table(table(falles$EDAD_grupo,falles$TIPOLUGAR),margin = 2),1)
round(100*prop.table(table(falles$EDAD_grupo,falles$TIPOLUGAR,falles$CLASDEF),margin = 1),1)
round(100*prop.table(table(falles$EDAD_grupo,falles$TIPOLUGAR,falles$CLASDEF),margin = 2),1)
fallesc=falles[falles$CLASDEF=="confirmado",]
table(fallesc$DEPARTAMENTO,fallesc$EDAD_A)
table(fallesc$DEPARTAMENTO,fallesc$EDAD_grupo)
prop.table(table(fallesc$DEPARTAMENTO,fallesc$EDAD_grupo),margin = 1)
100*prop.table(table(fallesc$DEPARTAMENTO,fallesc$EDAD_grupo),margin = 1)
round(100*prop.table(table(fallesc$DEPARTAMENTO,fallesc$EDAD_grupo),margin = 1),1)
round(100*prop.table(table(fallesc$DEPARTAMENTO,fallesc$EDAD_grupo),margin = 2),1)
round(100*prop.table(table(fallesc$DEPARTAMENTO,fallesc$EDAD_grupo),margin = 1),1)
reg_edad=as.data.frame(round(100*prop.table(table(fallesc$DEPARTAMENTO,fallesc$EDAD_grupo),margin = 1),1))
library(ggplot2)
base=ggplot(reg_edad)
library(ggpubr)
ggballoonplot(reg_edad)
ggballoonplot(t(reg_edad))
reg_edad=as.data.frame(round(100*prop.table(table(fallesc$EDAD_grupo,fallesc$DEPARTAMENTO),margin = 2),1))
library(ggpubr)
ggballoonplot(reg_edad)
ggballoonplot(reg_edad,size = 2)
ggballoonplot(reg_edad,size.range = c(1,5))
ggballoonplot(reg_edad,size.range = c(0.5,10))
reg_edad
reg_edad
reg_edad
library(ggpubr)
base=ggplot(data = reg_edad,aes(x=Var1,y=Var2))
base + geom_point(aes(size=Freq))
library(ggpubr)
base=ggplot(data = reg_edad,aes(x=Var1,y=reorder(Var2,Var1)))
base + geom_point(aes(size=Freq))
base=ggplot(data = reg_edad,aes(x=Var1,y=reorder(Var2,Var1,max)))
base + geom_point(aes(size=Freq))
library(ggpubr)
library(DescTools)
base=ggplot(data = reg_edad,aes(x=Var1,y=reorder(Var2,Var1,DescTools::max())))
base + geom_point(aes(size=Freq))
reg_edad
as.ordered(reg_edad$Var1)
levels(as.ordered(reg_edad$Var1))
reg_edad$Var1=as.ordered(reg_edad$Var1)
library(ggpubr)
library(DescTools)
base=ggplot(data = reg_edad,aes(x=Var1,y=reorder(Var2,Var1,max)))
base + geom_point(aes(size=Freq))
library(ggpubr)
library(DescTools)
base=ggplot(data = reg_edad,aes(x=Var1,y=reorder(Var2,Var1,sum)))
base + geom_point(aes(size=Freq))
library(ggpubr)
library(DescTools)
base=ggplot(data = reg_edad,aes(x=Var1,y=reorder(Var2,Var1,max)))
base + geom_point(aes(size=Freq))
library(ggpubr)
library(DescTools)
base=ggplot(data = reg_edad,aes(x=Var1,y=Var2))
base + geom_point(aes(size=Freq))
library(ggpubr)
library(DescTools)
base=ggplot(data = reg_edad,aes(x=Var1,y=Var2))
base + geom_point(aes(color=Freq))
library(ggpubr)
library(DescTools)
base=ggplot(data = reg_edad,aes(x=Var1,y=Var2))
base + geom_point(aes(color=Freq),size=3)
library(ggpubr)
library(DescTools)
base=ggplot(data = reg_edad,aes(x=Var1,y=Var2))
base + geom_point(aes(color=Freq),size=3) + scale_fill_brewer()
library(ggpubr)
library(DescTools)
base=ggplot(data = reg_edad,aes(x=Var1,y=Var2))
base + geom_point(aes(color=Freq),size=3) + scale_fill_brewer(palette = "YlOrRd")
library(ggpubr)
library(DescTools)
base=ggplot(data = reg_edad,aes(x=Var1,y=Var2))
base + geom_point(aes(color=Freq),size=3) + scale_color_brewer(palette = "YlOrRd")
library(ggpubr)
library(DescTools)
base=ggplot(data = reg_edad,aes(x=Var1,y=Var2))
base + geom_point(aes(color=Freq),size=3) + scale_color_gradient(low = "yellow",high = "red")
library(ggpubr)
library(DescTools)
base=ggplot(data = reg_edad,aes(x=Var1,y=Var2))
base + geom_point(aes(color=Freq),size=3) + scale_color_gradient(low = "yellow",high = "red",names="%")
library(ggpubr)
library(DescTools)
base=ggplot(data = reg_edad,aes(x=Var1,y=Var2))
base + geom_point(aes(color=Freq),size=3) + scale_color_gradient(low = "yellow",high = "red",name="%")
reg_lugar=as.data.frame(round(100*prop.table(table(fallesc$TIPOLUGAR,fallesc$DEPARTAMENTO),margin = 2),1))
reg_lugar$Var1=as.ordered(reg_lugar$Var1)
base=ggplot(data = reg_lugar,aes(x=Var1,y=Var2))
base + geom_point(aes(color=Freq),size=3) + scale_color_gradient(low = "yellow",high = "red",name="%")
library(ggpubr)
library(DescTools)
base=ggplot(data = reg_edad,aes(x=Var1,y=Var2))
base + geom_point(aes(color=Freq),size=3) + scale_color_gradient(low = "yellow",high = "red",name="%") + labs(x="Grupo Etareo", y="")
library(ggpubr)
library(DescTools)
base=ggplot(data = reg_edad,aes(x=Var1,y=Var2))
base + geom_point(aes(color=Freq),size=3) + scale_color_gradient(low = "yellow",high = "red",name="% Fallecidos") + labs(title="Porcentaje de fallecidos por Region",x="Grupo Etareo", y="")
base=ggplot(data = reg_lugar,aes(x=Var1,y=Var2))
base + geom_point(aes(color=Freq),size=3) + scale_color_gradient(low = "yellow",high = "red",name="%") + labs(title="Porcentaje de fallecidos por Lugar",x="Lugar de fallecimiento", y="")
library(ggpubr)
library(DescTools)
base=ggplot(data = reg_edad,aes(x=Var1,y=Var2))
base + geom_point(aes(color=Freq),size=3) + scale_color_gradient(low = "yellow",high = "red",name="% Fallecidos") + labs(title="Porcentaje de fallecidos por Grupo Etare",x="Grupo Etareo", y="")
library(ggpubr)
library(DescTools)
base=ggplot(data = reg_edad,aes(x=Var1,y=Var2))
base + geom_point(aes(color=Freq),size=3) + scale_color_gradient(low = "yellow",high = "red",name="% Fallecidos") + labs(title="Porcentaje de fallecidos por Grupo Etareo",x="Grupo Etareo", y="")
edad_lugar=as.data.frame(round(100*prop.table(table(fallesc$EDAD_grupo,fallesc$TIPOLUGAR),margin = 2),1))
edad_lugar$Var1=as.ordered(edad_lugar$Var1)
base=ggplot(data = edad_lugar,aes(x=Var1,y=Var2))
base + geom_point(aes(color=Freq),size=3) + scale_color_gradient(low = "yellow",high = "red",name="%") + labs(title="Porcentaje de fallecidos por Lugar",x="Lugar de fallecimiento", y="")
round(100*prop.table(table(fallesc$EDAD_grupo,fallesc$TIPOLUGAR),margin = 2),1)
as.data.frame(round(100*prop.table(table(fallesc$EDAD_grupo,fallesc$TIPOLUGAR)),1))
round(100*prop.table(table(fallesc$EDAD_grupo,fallesc$TIPOLUGAR)),1)
fallesc=falles[falles$CLASDEF=="confirmado",]
reg_edad=as.data.frame(round(100*prop.table(table(fallesc$EDAD_grupo,fallesc$DEPARTAMENTO),margin = 2),1))
reg_edad$Var1=as.ordered(reg_edad$Var1)
reg_lugar=as.data.frame(round(100*prop.table(table(fallesc$TIPOLUGAR,fallesc$DEPARTAMENTO),margin = 2),1))
reg_lugar$Var1=as.ordered(reg_lugar$Var1)
edad_lugar=as.data.frame(round(100*prop.table(table(fallesc$EDAD_grupo,fallesc$TIPOLUGAR)),1))
edad_lugar$Var1=as.ordered(edad_lugar$Var1)
library(ggplot2)
base=ggplot(data = edad_lugar,aes(x=Var1,y=Var2))
base + geom_point(aes(color=Freq),size=3) + scale_color_gradient(low = "yellow",high = "red",name="%") + labs(title="Porcentaje de fallecidos por Lugar",x="Lugar de fallecimiento", y="")
base=ggplot(data = edad_lugar,aes(x=Var1,y=Var2))
base + geom_point(aes(color=Freq, size=Freq)) + scale_color_gradient(low = "yellow",high = "red",name="%") + labs(title="Porcentaje de fallecidos por Lugar",x="Lugar de fallecimiento", y="")
round(100*prop.table(table(fallesc$EDAD_grupo,fallesc$TIPOLUGAR)),1)
base=ggplot(data = edad_lugar,aes(x=Var1,y=Var2))
base + geom_point(aes(color=Freq, size=Freq)) + scale_color_gradient(low = "yellow",high = "red",name="%") + labs(title="Porcentaje de fallecidos por Lugar",x="Lugar de fallecimiento", y="") + guides(size=F)
base=ggplot(data = edad_lugar,aes(x=Var1,y=Var2)) + theme_classic()
base + geom_point(aes(color=Freq, size=Freq)) + scale_color_gradient(low = "yellow",high = "red",name="%") + labs(title="Porcentaje de fallecidos por Lugar",x="Lugar de fallecimiento", y="") + guides(size=F)
base=ggplot(data = edad_lugar,aes(x=Var1,y=Var2)) + theme_light()
base + geom_point(aes(color=Freq, size=Freq)) + scale_color_gradient(low = "yellow",high = "red",name="%") + labs(title="Porcentaje de fallecidos por Lugar",x="Lugar de fallecimiento", y="") + guides(size=F)
base=ggplot(data = edad_lugar,aes(x=Var1,y=Var2)) + theme_light()
base + geom_point(aes(color=Freq, size=Freq, label=Freq) + scale_color_gradient(low = "yellow",high = "red",name="%") + labs(title="Porcentaje de fallecidos por Lugar",x="Lugar de fallecimiento", y="") + guides(size=F)
base=ggplot(data = edad_lugar,aes(x=Var1,y=Var2,label=Freq)) + theme_light()
base + geom_point(aes(color=Freq, size=Freq) + scale_color_gradient(low = "yellow",high = "red",name="%") + labs(title="Porcentaje de fallecidos por Lugar",x="Lugar de fallecimiento", y="") + guides(size=F)
base=ggplot(data = edad_lugar,aes(x=Var1,y=Var2,label=Freq)) + theme_light()
base + geom_point(aes(color=Freq, size=Freq)) + scale_color_gradient(low = "yellow",high = "red",name="%") + labs(title="Porcentaje de fallecidos por Lugar",x="Lugar de fallecimiento", y="") + guides(size=F)
base=ggplot(data = edad_lugar,aes(x=Var1,y=Var2,label=Freq)) + theme_light()
base + geom_point(aes(color=Freq, size=Freq)) + scale_color_gradient(low = "yellow",high = "red",name="%") + labs(title="Porcentaje de fallecidos por Lugar",x="Lugar de fallecimiento", y="") + guides(size=F) + geom_text()
base=ggplot(data = edad_lugar,aes(x=Var1,y=Var2,label=Freq)) + theme_light()
base + geom_point(aes(color=Freq, size=Freq)) + scale_color_gradient(low = "yellow",high = "red",name="%") + labs(title="Porcentaje de fallecidos por Lugar",x="Lugar de fallecimiento", y="") + guides(size=F, color=F) + geom_text()
base=ggplot(data = edad_lugar,aes(x=Var1,y=Var2,label=Freq)) + theme_light()
base + geom_point(aes(color=Freq, size=Freq)) + scale_color_gradient(low = "yellow",high = "red",name="%") + labs(title="Porcentaje de fallecidos por Lugar",x="Lugar de fallecimiento", y="") + guides(size=F, color=F) + geom_text(nudge_x = 5)
base=ggplot(data = edad_lugar,aes(x=Var1,y=Var2,label=Freq)) + theme_light()
base + geom_point(aes(color=Freq, size=Freq)) + scale_color_gradient(low = "yellow",high = "red",name="%") + labs(title="Porcentaje de fallecidos por Lugar",x="Lugar de fallecimiento", y="") + guides(size=F, color=F) + geom_text(nudge_x = 1)
base=ggplot(data = edad_lugar,aes(x=Var1,y=Var2,label=Freq)) + theme_light()
base + geom_point(aes(color=Freq, size=Freq)) + scale_color_gradient(low = "yellow",high = "red",name="%") + labs(title="Porcentaje de fallecidos por Lugar",x="Lugar de fallecimiento", y="") + guides(size=F, color=F) + geom_text(nudge_x = 0.2)
base=ggplot(data = edad_lugar,aes(x=Var1,y=Var2,label=Freq)) + theme_light()
base + geom_point(aes(color=Freq, size=Freq)) + scale_color_gradient(low = "yellow",high = "red",name="%") + labs(title="Porcentaje de fallecidos por Lugar",x="Lugar de fallecimiento", y="") + guides(size=F, color=F) + geom_text(nudge_x = 0.25)
base=ggplot(data = edad_lugar,aes(x=Var1,y=Var2,label=Freq))
base + geom_point(aes(color=Freq, size=Freq)) + scale_color_gradient(low = "yellow",high = "red",name="%") + labs(title="Porcentaje de fallecidos por Lugar",x="Lugar de fallecimiento", y="") + guides(size=F, color=F) + geom_text(nudge_x = 0.25)
base=ggplot(data = edad_lugar,aes(x=Var1,y=Var2,label=Freq))
base + geom_point(aes(color=Freq, size=Freq)) + scale_color_gradient(low = "yellow",high = "red",name="%") + labs(title="Porcentaje de fallecidos por Lugar",x="Grupo Etareo", y="") + guides(size=F, color=F) + geom_text(nudge_x = 0.25)
base=ggplot(data = edad_lugar,aes(x=Var1,y=Var2,label=Freq))
base + geom_point(aes(color=Freq, size=Freq)) + scale_color_gradient(low = "yellow",high = "red",name="%") + labs(title="Porcentaje de fallecidos por Lugar y Edad",x="Grupo Etareo", y="") + guides(size=F, color=F) + geom_text(nudge_x = 0.25)
base=ggplot(data = edad_lugar,aes(x=Var1,y=Var2,label=Freq))
base + geom_point(aes(color=Freq, size=Freq)) + scale_color_gradient(low = "yellow",high = "red",name="%") + labs(title="Porcentaje de fallecidos por Lugar y Edad",x="", y="") + guides(size=F, color=F) + geom_text(nudge_x = 0.25)
cdc=readRDS("falles_casos.RDS")
View(cdc)
rio::export(cdc,"dataregion.xslx")
rio::export(cdc,"dataregion.xlsx")
